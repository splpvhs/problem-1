
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>اختبر معلوماتك!</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Cairo', 'Poppins', sans-serif; }
    </style>
</head>
<body class="bg-gray-100 min-h-screen flex items-center justify-center p-4">

    <div id="app" class="bg-white rounded-xl shadow-xl w-full max-w-2xl p-6 sm:p-8">
        <!-- Content injected by JS -->
    </div>

    <script>
        const questions = [{"question":"ذهبت سارة إلى السوق واشترت 2.5 كجم من التفاح بسعر 1.50 دينار للكيلوغرام الواحد، و 0.75 كجم من العنب بسعر 2.20 دينار للكيلوغرام الواحد. إذا دفعت للبائع ورقة نقدية من فئة 10 دنانير، فكم هو المبلغ المتبقي لها؟","options":["5.40 دينار","4.60 دينار","6.25 دينار","3.75 دينار"],"correctAnswerIndex":1,"explanation":"أولاً، نحسب تكلفة التفاح بضرب وزنه في سعره (2.5 * 1.50 = 3.75 دينار). ثم نحسب تكلفة العنب (0.75 * 2.20 = 1.65 دينار). نجمع التكلفة الإجمالية (3.75 + 1.65 = 5.40 دينار). أخيرًا، نطرح التكلفة الإجمالية من المبلغ المدفوع (10 - 5.40 = 4.60 دينار)."},{"question":"يريد أحمد طلاء جدارين في غرفته. أبعاد الجدار الأول هي 4.5 متر في 2.8 متر، وأبعاد الجدار الثاني هي 3.2 متر في 2.8 متر. إذا كانت علبة الطلاء الواحدة تغطي 5 متر مربع وتكلف 7.25 دينار، فما هي التكلفة الإجمالية لشراء الطلاء اللازم؟ (افترض أنه لا يمكن شراء جزء من علبة الطلاء).","options":["29.00 دينار","31.28 دينار","36.25 دينار","43.50 دينار"],"correctAnswerIndex":2,"explanation":"نحسب مساحة الجدار الأول (4.5 * 2.8 = 12.6 متر مربع) ومساحة الجدار الثاني (3.2 * 2.8 = 8.96 متر مربع). نجمع المساحتين (12.6 + 8.96 = 21.56 متر مربع). نقسم المساحة الإجمالية على مساحة تغطية العلبة الواحدة (21.56 / 5 = 4.312). بما أنه لا يمكن شراء جزء من علبة، يجب شراء 5 علب. التكلفة الإجمالية هي (5 * 7.25 = 36.25 دينار)."},{"question":"سيارة تستهلك 8.5 لتر من الوقود لكل 100 كيلومتر. إذا كان خزان الوقود يحتوي على 45 لترًا وقاد السائق مسافة 350 كيلومترًا، فكم لترًا من الوقود يتبقى في الخزان؟","options":["29.75 لتر","20.50 لتر","9.75 لتر","15.25 لتر"],"correctAnswerIndex":3,"explanation":"أولاً، نحسب كمية الوقود المستهلكة بقسمة المسافة على 100 ثم الضرب في معدل الاستهلاك ((350 / 100) * 8.5 = 29.75 لتر). أخيرًا، نطرح الوقود المستهلك من إجمالي الوقود في الخزان (45 - 29.75 = 15.25 لتر)."},{"question":"وصفة كعكة تتطلب 250 جرامًا من الطحين و 150 جرامًا من السكر. إذا أرادت ليلى صنع 3.5 أضعاف كمية الوصفة، فما هو الوزن الإجمالي للطحين والسكر الذي ستحتاجه بالكيلوغرام؟","options":["1.25 كجم","1400 كجم","1.40 كجم","0.40 كجم"],"correctAnswerIndex":2,"explanation":"نضرب كمية الطحين المطلوبة في 3.5 (250 * 3.5 = 875 جرام). نضرب كمية السكر في 3.5 (150 * 3.5 = 525 جرام). نجمع الوزنين (875 + 525 = 1400 جرام). أخيرًا، نحول من الجرام إلى الكيلوغرام بالقسمة على 1000 (1400 / 1000 = 1.4 كجم)."},{"question":"اشترى خياط 3 قطع من القماش. طول القطعة الأولى 250 سم، والثانية 3.2 متر، والثالثة 180 سم. إذا كان سعر المتر الواحد من القماش 5.40 دينار، وحصل الخياط على خصم إجمالي قدره 4.50 دينار، فكم المبلغ الذي دفعه؟","options":["40.50 دينار","36.00 دينار","45.00 دينار","38.20 دينار"],"correctAnswerIndex":1,"explanation":"أولاً، نوحد الوحدات بتحويل السنتيمتر إلى متر (250 سم = 2.5 م، 180 سم = 1.8 م). ثم نجمع الأطوال كلها (2.5 + 3.2 + 1.8 = 7.5 متر). نحسب التكلفة الإجمالية قبل الخصم بضرب الطول الإجمالي في السعر (7.5 * 5.40 = 40.50 دينار). أخيرًا، نطرح قيمة الخصم (40.50 - 4.50 = 36.00 دينار)."},{"question":"خزان ماء على شكل متوازي مستطيلات أبعاده 2.5 متر، 1.5 متر، و 1.2 متر. إذا كان الخزان ممتلئًا حتى نصفه، فكم دقيقة تحتاج مضخة تضخ 50 لترًا في الدقيقة لملء النصف المتبقي؟ (مع العلم أن 1 متر مكعب = 1000 لتر).","options":["90 دقيقة","22.5 دقيقة","45 دقيقة","50 دقيقة"],"correctAnswerIndex":2,"explanation":"نحسب الحجم الكلي للخزان (2.5 * 1.5 * 1.2 = 4.5 متر مكعب). نحول الحجم إلى لترات (4.5 * 1000 = 4500 لتر). حجم النصف المتبقي هو (4500 / 2 = 2250 لتر). أخيرًا، نقسم حجم الماء المطلوب على معدل تدفق المضخة لمعرفة الزمن (2250 / 50 = 45 دقيقة)."},{"question":"ثلاثة أصدقاء بدأوا مشروعًا صغيرًا. في نهاية الشهر، كانت أرباحهم الإجمالية 1860.60 دينار. قبل تقسيم الأرباح بالتساوي، كان عليهم دفع مصاريف بقيمة 345.30 دينار. كم كان نصيب كل صديق من الربح الصافي؟","options":["620.20 دينار","1515.30 دينار","455.50 دينار","505.10 دينار"],"correctAnswerIndex":3,"explanation":"أولاً، نحسب الربح الصافي بطرح المصاريف من الأرباح الإجمالية (1860.60 - 345.30 = 1515.30 دينار). بعد ذلك، نقسم الربح الصافي على عدد الأصدقاء الثلاثة (1515.30 / 3 = 505.10 دينار) لمعرفة نصيب كل فرد."},{"question":"سافر سائق من المدينة أ إلى المدينة ب مسافة 120 كم في 1.5 ساعة. ثم سافر من المدينة ب إلى المدينة ج مسافة 100 كم في ساعة واحدة. ما هو متوسط سرعته بالكيلومتر في الساعة للرحلة بأكملها؟","options":["90 كم/ساعة","88 كم/ساعة","220 كم/ساعة","85.5 كم/ساعة"],"correctAnswerIndex":1,"explanation":"لحساب متوسط السرعة، نجمع المسافات الكلية (120 + 100 = 220 كم) ونجمع الأزمنة الكلية (1.5 + 1 = 2.5 ساعة). ثم نقسم إجمالي المسافة على إجمالي الزمن (220 / 2.5 = 88 كم/ساعة)."},{"question":"يراد تبليط أرضية غرفة مستطيلة أبعادها 4.5 متر في 6 متر. إذا كانت أبعاد البلاطة الواحدة هي 30 سم في 30 سم، فكم بلاطة تلزم لتغطية كامل أرضية الغرفة؟","options":["250 بلاطة","270 بلاطة","320 بلاطة","300 بلاطة"],"correctAnswerIndex":3,"explanation":"أولاً، نحسب مساحة الغرفة (4.5 * 6 = 27 متر مربع). ثم نحول أبعاد البلاطة إلى المتر (30 سم = 0.3 متر) ونحسب مساحتها (0.3 * 0.3 = 0.09 متر مربع). أخيرًا، نقسم مساحة الغرفة على مساحة البلاطة الواحدة لمعرفة عدد البلاطات المطلوبة (27 / 0.09 = 300 بلاطة)."},{"question":"قام كيميائي بخلط 1.2 لتر من محلول تركيزه 2.5 جرام/لتر مع 800 ملل من محلول آخر تركيزه 4.0 جرام/لتر. ما هو إجمالي كمية المادة المذابة بالجرام في الخليط النهائي؟ (1 لتر = 1000 ملل).","options":["5.7 جرام","6.2 جرام","6.5 جرام","7.2 جرام"],"correctAnswerIndex":1,"explanation":"نحسب كمية المادة المذابة في المحلول الأول (1.2 * 2.5 = 3.0 جرام). ثم نحول حجم المحلول الثاني إلى لترات (800 ملل = 0.8 لتر). نحسب كمية المادة المذابة في المحلول الثاني (0.8 * 4.0 = 3.2 جرام). أخيرًا، نجمع الكميتين للحصول على الإجمالي (3.0 + 3.2 = 6.2 جرام)."}];
        const ui = {"title":"شرح المسائل الرياضية","subtitle":"للطلاب من 8 إلى 13 سنة","problemPlaceholder":"اكتب مسألتك الرياضية هنا، أو قم برفع صورة...","uploadButton":"رفع صورة","solveButton":"حل!","solving":"جاري الحل...","solutionTab":"الحل","quizTab":"اختبار","flashcardsTab":"بطاقات تعليمية","problemAnalysis":"تحليل المسألة","solutionSteps":"خطوات الحل","visualization":"رسم توضيحي","quizTitle":"اختبر معلوماتك!","submitAnswer":"إرسال","correct":"صحيح!","incorrect":"خطأ.","correctAnswerIs":"الإجابة الصحيحة هي:","flipCard":"انقر للقلب","error":"حدث خطأ. يرجى المحاولة مرة أخرى.","apiKeyError":"تم رفض الإذن. يرجى اختيار مفتاح API صالح والمحاولة مرة أخرى.","fileSelected":"الملف المختار:","changeFile":"تغيير","howManyQuestions":"كم عدد الأسئلة التي تريدها؟","howManyFlashcards":"كم عدد البطاقات التعليمية التي تريدها؟","startQuiz":"ابدأ الاختبار","startReview":"ابدأ المراجعة","questions":"أسئلة","flashcards":"بطاقات","quizComplete":"اكتمل الاختبار!","reviewComplete":"اكتملت المراجعة!","yourScore":"نتيجتك:","retryQuiz":"إعادة نفس الاختبار","newQuizSameProblem":"اختبار جديد (نفس المسألة)","newQuizSimilarProblem":"اختبار جديد (مسائل مشابهة)","reviewSame":"مراجعة نفس البطاقات","newCardsSameConcept":"بطاقات جديدة (نفس المفهوم)","newCardsSimilarConcept":"بطاقات جديدة (مفاهيم مشابهة)","quizOf10":"يتكون هذا الاختبار من 10 أسئلة.","flashcardsOf10":"تحتوي هذه المجموعة على 10 بطاقات تعليمية.","save":"حفظ","generating":"جاري الإنشاء...","next":"التالي","finish":"إنهاء","question":"سؤال","of":"من","previous":"السابق","regenerateImage":"إعادة إنشاء","downloadImage":"تنزيل","regenerating":"جاري الإنشاء...","downloadQuestion":"تنزيل السؤال","downloadAnswer":"تنزيل الإجابة","downloadAll":"تنزيل الكل","quizDirectlyBased":"هذا الاختبار مبني مباشرة على المسألة التي أدخلتها.","orGenerateNewQuiz":"أو قم بإنشاء واحد جديد","cardsBasedOnConcept":"تعتمد هذه البطاقات على الفكرة الرئيسية لمسألتك.","orGenerateNewCards":"أو قم بإنشاء بطاقات جديدة","downloadAllSteps":"تنزيل كل الخطوات","stepHeader":"خطوة","problemSolvingApproach":"منهجية حل المسألة","downloadApproach":"تنزيل المنهجية","history":"السجل","clearHistory":"مسح السجل","loadProblem":"تحميل المسألة","noHistory":"لا توجد مسائل محلولة بعد.","problemFrom":"مسألة من:","exportWeb":"تصدير كصفحة ويب","exportWebDesc":"قم بتنزيل ملف HTML مستقل لمشاركته مع الطلاب."};
        let currentIndex = 0;
        let score = 0;
        let selectedOption = null;
        let isSubmitted = false;

        const app = document.getElementById('app');

        function renderQuestion() {
            if (currentIndex >= questions.length) {
                renderResults();
                return;
            }

            const q = questions[currentIndex];
            selectedOption = null;
            isSubmitted = false;

            let html = `
                <div class="flex justify-between items-center mb-6 border-b pb-4">
                    <span class="text-sm font-semibold text-gray-500">${ui.question} ${currentIndex + 1} / ${questions.length}</span>
                </div>
                <h2 class="text-xl sm:text-2xl font-bold text-gray-800 mb-6">${q.question}</h2>
                <div class="space-y-3 mb-8">
            `;

            q.options.forEach((opt, idx) => {
                html += `
                    <button onclick="selectOption(${idx})" id="opt-${idx}" class="w-full text-start p-4 rounded-lg border-2 transition-all hover:bg-blue-50 hover:border-blue-400 border-gray-200 text-gray-700 text-lg">
                        ${opt}
                    </button>
                `;
            });

            html += `
                </div>
                <button onclick="submitAnswer()" id="submitBtn" disabled class="w-full py-3 px-6 bg-blue-600 text-white font-bold rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors">
                    ${ui.submitAnswer}
                </button>
                <div id="feedback" class="mt-6 hidden"></div>
                <button onclick="nextQuestion()" id="nextBtn" class="w-full mt-4 py-3 px-6 bg-gray-700 text-white font-bold rounded-lg hover:bg-gray-800 transition-colors hidden">
                    ${ui.next}
                </button>
            `;

            app.innerHTML = html;
        }

        window.selectOption = (idx) => {
            if (isSubmitted) return;
            selectedOption = idx;
            
            // Reset styles
            questions[currentIndex].options.forEach((_, i) => {
                const btn = document.getElementById(`opt-${i}`);
                btn.classList.remove('bg-blue-100', 'border-blue-500');
                btn.classList.add('border-gray-200');
            });

            // Highlight selected
            const selectedBtn = document.getElementById(`opt-${idx}`);
            selectedBtn.classList.remove('border-gray-200');
            selectedBtn.classList.add('bg-blue-100', 'border-blue-500');

            document.getElementById('submitBtn').disabled = false;
        };

        window.submitAnswer = () => {
            isSubmitted = true;
            document.getElementById('submitBtn').classList.add('hidden');
            
            const q = questions[currentIndex];
            const isCorrect = selectedOption === q.correctAnswerIndex;
            
            if (isCorrect) score++;

            // Update UI
            const feedback = document.getElementById('feedback');
            feedback.classList.remove('hidden');
            
            if (isCorrect) {
                feedback.innerHTML = `<div class="p-4 bg-green-50 text-green-800 rounded-lg flex items-center gap-2 font-bold"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> ${ui.correct}</div>`;
                document.getElementById(`opt-${selectedOption}`).classList.add('bg-green-100', 'border-green-500');
            } else {
                feedback.innerHTML = `
                    <div class="p-4 bg-red-50 text-red-800 rounded-lg">
                        <div class="flex items-center gap-2 font-bold mb-2"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg> ${ui.incorrect}</div>
                        <p>${ui.correctAnswerIs} <strong>${q.options[q.correctAnswerIndex]}</strong></p>
                    </div>
                `;
                document.getElementById(`opt-${selectedOption}`).classList.add('bg-red-100', 'border-red-500');
                document.getElementById(`opt-${q.correctAnswerIndex}`).classList.add('bg-green-100', 'border-green-500');
            }
            
            // Add explanation
            feedback.innerHTML += `<p class="mt-3 text-gray-700 p-4 bg-gray-50 rounded-lg">${q.explanation}</p>`;

            document.getElementById('nextBtn').classList.remove('hidden');
            if(currentIndex === questions.length - 1) {
                document.getElementById('nextBtn').innerText = ui.finish;
            }
        };

        window.nextQuestion = () => {
            currentIndex++;
            renderQuestion();
        };

        function renderResults() {
            app.innerHTML = `
                <div class="text-center py-8">
                    <h2 class="text-3xl font-bold text-gray-800 mb-4">${ui.quizComplete}</h2>
                    <p class="text-xl text-gray-600 mb-8">${ui.yourScore} <span class="font-bold text-blue-600 text-3xl">${score} / ${questions.length}</span></p>
                    <button onclick="location.reload()" class="py-3 px-8 bg-blue-600 text-white font-bold rounded-lg hover:bg-blue-700 transition-colors">
                        ${ui.retryQuiz}
                    </button>
                </div>
            `;
        }

        renderQuestion();
    </script>
</body>
</html>
  
